<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TradeSync Pro - Purchase License</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="logo">
                <span class="logo-icon">üìà</span>
                <h1>TradeSync Pro</h1>
            </div>
            <p class="tagline">Professional Trade Copying Software</p>
        </header>

        <div class="progress-bar">
            <div class="step active">
                <div class="step-number">1</div>
                <span>Select Plan</span>
            </div>
            <div class="step">
                <div class="step-number">2</div>
                <span>Your Details</span>
            </div>
            <div class="step">
                <div class="step-number">3</div>
                <span>Payment</span>
            </div>
        </div>

        <main class="main-content">
            <h2 class="section-title">Choose Your License Plan</h2>
            <p class="section-subtitle">Select the subscription duration that works best for you</p>

            <div class="plans-container" id="plansContainer">
                <div class="loading">
                    <div class="spinner"></div>
                    <p>Loading plans...</p>
                </div>
            </div>
        </main>

        <footer class="footer">
            <p>üîí Direct USDT Payment - No Third-Party Fees</p>
            <p class="footer-note">Pay with USDT (TRC20) ‚Ä¢ Activation key will be sent to your email</p>
        </footer>
    </div>

    <script src="js/app.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                const info = await PaymentAPI.getPaymentInfo();
                renderPlans(info.plans);
            } catch (error) {
                document.getElementById('plansContainer').innerHTML = `
                        <div class="error-message">
                            <p>‚ùå Failed to load plans. Please refresh the page.</p>
                        </div>
                    `;
            }
        });

        function renderPlans(plans) {
            const container = document.getElementById('plansContainer');

            const plansHTML = plans.map((plan) => {
                const isPopular = plan.days === 30;
                return `
                        <div class="plan-card ${isPopular ? 'popular' : ''}" onclick="selectPlan(${plan.days}, ${plan.price})">
                            ${isPopular ? '<div class="popular-badge">Most Popular</div>' : ''}
                            <div class="plan-duration">${plan.days} Days</div>
                            <div class="plan-price">
                                <span class="currency">$</span>
                                <span class="amount">${plan.price}</span>
                                <span class="unit">USDT</span>
                            </div>
                            <div class="plan-perday">$${(plan.price / plan.days).toFixed(2)}/day</div>
                            <ul class="plan-features">
                                <li>‚úì Full Software Access</li>
                                <li>‚úì Unlimited Trade Copying</li>
                                <li>‚úì Email Support</li>
                                ${plan.days >= 20 ? '<li>‚úì Priority Support</li>' : ''}
                                ${plan.days >= 30 ? '<li>‚úì Best Value</li>' : ''}
                            </ul>
                            <button class="btn btn-primary">Select Plan</button>
                        </div>
                    `;
            }).join('');

            container.innerHTML = plansHTML;
        }

        function selectPlan(days, price) {
            sessionStorage.setItem('selectedPlan', JSON.stringify({ days, price }));
            window.location.href = 'checkout.html';
        }
    </script>
</body>
</html>
